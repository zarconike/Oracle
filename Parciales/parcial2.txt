create table PROJECTS (id int, CODE VARCHAR2(255) NOT NULL, MANAGER_ID INT, BUDGET INT NOT NULL, DATE_OF_BEGINNING DATE, DATE_OF_ENDING DATE)

ALTER TABLE PROJECTS ADD CONSTRAINT PROJECTS_PK
PRIMARY KEY (ID);

ALTER TABLE PROJECTS ADD CONSTRAINT FK_MANAGER_PROJECT
FOREIGN KEY (MANAGER_ID) REFERENCES PROJECTS (ID);

**********************************************

create table EMPLOYEES (id int, MANAGER_ID INT, DATE_OF_JOINING DATE NOT NULL, FULL_NAME VARCHAR2(255) NOT NULL)

ALTER TABLE EMPLOYEES ADD CONSTRAINT EMPLOYEES_PK
PRIMARY KEY (ID);

ALTER TABLE EMPLOYEES ADD CONSTRAINT FK_MANAGER
FOREIGN KEY (MANAGER_ID) REFERENCES EMPLOYEES (ID);

*********************************************************************************


create table SALARIES (id int, EMPLOYEE_ID INT NOT NULL, PROJECT_ID INT, SALARY DECIMAL(10,2) NOT NULL )

ALTER TABLE SALARIES ADD CONSTRAINT SALARIES_PK
PRIMARY KEY (id);
      
ALTER TABLE SALARIES ADD CONSTRAINT FK_SALARY_EMPLOYEE
FOREIGN KEY (EMPLOYEE_ID) REFERENCES SALARIES (ID);

ALTER TABLE SALARIES ADD CONSTRAINT FK_SALARY_PROJECT
FOREIGN KEY (PROJECT_ID) REFERENCES SALARIES (ID);

ALTER TABLE SALARIES ADD CONSTRAINT CK_SALARY
      CHECK (SALARY> 500);

************QUERYES *********

SELECT P.CODE, COUNT(*)
FROM PROJECTS P INNER JOIN SALARIES S ON P.ID = S.PROJECT_ID
INNER JOIN EMPLOYEES E ON S.EMPLOYEE_ID = E.ID
GROUP BY P.CODE

SELECT E.FULL_NAME
FROM PROJECTS P INNER JOIN SALARIES S ON P.ID = S.PROJECT_ID
LEFT JOIN EMPLOYEES E ON S.EMPLOYEE_ID = E.ID
WHERE P.ID IS NULL

SELECT *
FROM EMPLOYEES
WHERE MANAGER_ID = 1

SELECT FULL_NAME + ' - ' + TO_CHAR(MANAGER_ID) AS employee_boss
FROM EMPLOYEES

SELECT *
FROM EMPLOYEES
WHERE FULL_NAME LIKE 'Kermit%'


